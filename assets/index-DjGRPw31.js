(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))g(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&g(l)}).observe(document,{childList:!0,subtree:!0});function d(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function g(n){if(n.ep)return;n.ep=!0;const s=d(n);fetch(n.href,s)}})();const u=document.getElementById("file-input"),i=document.getElementById("preview-canvas"),o=i.getContext("2d",{willReadFrequently:!0}),R=document.getElementById("camera-btn"),b=document.getElementById("camera-container"),h=document.getElementById("camera-video"),D=document.getElementById("capture-btn"),P=document.getElementById("close-camera-btn");let p=null,v=!1;const f=document.getElementById("decoded-info"),y=document.getElementById("loading-spinner"),x=document.getElementById("no-result"),E=document.getElementById("awaiting-text"),r=document.getElementById("status-badge"),m=document.getElementById("image-preview-container"),c=document.getElementById("upload-area"),C=document.getElementById("res-type"),L=document.getElementById("res-raw"),I=document.getElementById("wifi-grid"),w=document.getElementById("wifi-flag"),O=document.getElementById("wifi-ssid"),N=document.getElementById("wifi-pass"),W=document.getElementById("wifi-encryption");function B(e){if(e.startsWith("http://")||e.startsWith("https://")?(L.innerHTML=`<a href="${e}" target="_blank" class="text-green-300 hover:text-green-100 underline">${e}</a>`,C.textContent="URL"):(L.textContent=e,C.textContent=e.startsWith("WIFI:")?"WIFI_CONFIG":"TEXT"),e.startsWith("WIFI:")){I.classList.remove("hidden"),w.classList.remove("hidden");const t=e.match(/S:([^;]+);/)?.[1]||"---",d=e.match(/P:([^;]+);/)?.[1]||"---",g=e.match(/T:([^;]+);/)?.[1]||"---";O.textContent=t,N.textContent=d,W.textContent=g}else I.classList.add("hidden"),w.classList.add("hidden")}u.addEventListener("change",e=>{const t=e.target.files[0];if(!t)return;f.classList.add("hidden"),y.classList.remove("hidden"),x.classList.add("hidden"),r.textContent="Scanning",r.className="px-2 py-0.5 border border-yellow-600 text-yellow-500 text-[9px] uppercase";const d=new FileReader;d.onload=g=>{const n=new Image;n.onload=()=>{m.classList.remove("hidden"),m.classList.remove("animating");const s=Math.min(600/n.width,400/n.height,1);i.width=n.width*s,i.height=n.height*s,o.drawImage(n,0,0,i.width,i.height);const l=o.getImageData(0,0,i.width,i.height),a=jsQR(l.data,l.width,l.height);m.offsetWidth,m.classList.add("animating"),setTimeout(()=>{y.classList.add("hidden"),a?(B(a.data),f.classList.remove("hidden"),r.textContent="Success",r.className="px-2 py-0.5 border border-green-500 text-green-500 text-[9px] uppercase",o.strokeStyle="#00ff41",o.lineWidth=4,o.beginPath(),o.moveTo(a.location.topLeftCorner.x,a.location.topLeftCorner.y),o.lineTo(a.location.topRightCorner.x,a.location.topRightCorner.y),o.lineTo(a.location.bottomRightCorner.x,a.location.bottomRightCorner.y),o.lineTo(a.location.bottomLeftCorner.x,a.location.bottomLeftCorner.y),o.closePath(),o.stroke()):(r.textContent="Error",r.className="px-2 py-0.5 border border-red-900 text-red-500 text-[9px] uppercase",x.classList.remove("hidden"),E.innerHTML='<span class="text-red-500">FAILED_TO_DECODE_PATTERN</span>')},1500)},n.src=g.target.result},d.readAsDataURL(t)});c.addEventListener("dragover",e=>{e.preventDefault(),c.classList.add("drag-over")});c.addEventListener("dragleave",()=>{c.classList.remove("drag-over")});c.addEventListener("drop",e=>{e.preventDefault(),c.classList.remove("drag-over");const t=e.dataTransfer.files;t.length>0&&(u.files=t,u.dispatchEvent(new Event("change")))});document.getElementById("clear-btn").addEventListener("click",()=>{u.value="",m.classList.add("hidden"),f.classList.add("hidden"),y.classList.add("hidden"),x.classList.remove("hidden"),E.textContent="Awaiting input...",r.textContent="Waiting",r.className="px-2 py-0.5 border border-green-900 text-[9px] uppercase",o.clearRect(0,0,i.width,i.height)});document.getElementById("copy-btn").addEventListener("click",()=>{const e=L.textContent,t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t);const d=document.getElementById("copy-btn").textContent;document.getElementById("copy-btn").textContent="COPIED",setTimeout(()=>{document.getElementById("copy-btn").textContent=d},1e3)});R.addEventListener("click",async()=>{try{p=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}),h.srcObject=p,b.classList.remove("hidden"),v=!0,c.classList.add("hidden")}catch(e){console.error("Camera access denied:",e),alert("Camera access denied. Please allow camera permissions.")}});P.addEventListener("click",()=>{T()});D.addEventListener("click",()=>{v&&(h.pause(),i.width=h.videoWidth,i.height=h.videoHeight,o.drawImage(h,0,0),F(),T(),m.classList.remove("hidden"),m.classList.remove("animating"))});function T(){p&&(p.getTracks().forEach(e=>e.stop()),p=null),b.classList.add("hidden"),c.classList.remove("hidden"),v=!1}function F(){const e=o.getImageData(0,0,i.width,i.height),t=jsQR(e.data,e.width,e.height);y.classList.add("hidden"),t?(B(t.data),f.classList.remove("hidden"),r.textContent="Success",r.className="px-2 py-0.5 border border-green-500 text-green-500 text-[9px] uppercase",o.strokeStyle="#00ff41",o.lineWidth=4,o.beginPath(),o.moveTo(t.location.topLeftCorner.x,t.location.topLeftCorner.y),o.lineTo(t.location.topRightCorner.x,t.location.topRightCorner.y),o.lineTo(t.location.bottomRightCorner.x,t.location.bottomRightCorner.y),o.lineTo(t.location.bottomLeftCorner.x,t.location.bottomLeftCorner.y),o.closePath(),o.stroke()):(r.textContent="Error",r.className="px-2 py-0.5 border border-red-900 text-red-500 text-[9px] uppercase",x.classList.remove("hidden"),E.innerHTML='<span class="text-red-500">FAILED_TO_DECODE_PATTERN</span>')}
