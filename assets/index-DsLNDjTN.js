(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))h(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&h(l)}).observe(document,{childList:!0,subtree:!0});function d(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function h(n){if(n.ep)return;n.ep=!0;const s=d(n);fetch(n.href,s)}})();const f=document.getElementById("file-input"),i=document.getElementById("preview-canvas"),o=i.getContext("2d",{willReadFrequently:!0}),D=document.getElementById("camera-btn"),B=document.getElementById("camera-container"),p=document.getElementById("camera-video"),O=document.getElementById("capture-btn"),M=document.getElementById("close-camera-btn");let u=null,E=!1;const y=document.getElementById("decoded-info"),L=document.getElementById("loading-spinner"),v=document.getElementById("no-result"),C=document.getElementById("awaiting-text"),r=document.getElementById("status-badge"),m=document.getElementById("image-preview-container"),c=document.getElementById("upload-area"),w=document.getElementById("res-type"),x=document.getElementById("res-raw"),I=document.getElementById("wifi-grid"),b=document.getElementById("wifi-flag"),N=document.getElementById("wifi-ssid"),T=document.getElementById("wifi-pass"),W=document.getElementById("wifi-encryption"),g=document.getElementById("copy-pass-btn");function R(e){if(e.startsWith("http://")||e.startsWith("https://")?(x.innerHTML=`<a href="${e}" target="_blank" class="text-green-300 hover:text-green-100 underline">${e}</a>`,w.textContent="URL"):(x.textContent=e,w.textContent=e.startsWith("WIFI:")?"WIFI_CONFIG":"TEXT"),e.startsWith("WIFI:")){I.classList.remove("hidden"),b.classList.remove("hidden");const t=e.match(/S:([^;]+);/)?.[1]||"---",d=e.match(/P:([^;]+);/)?.[1]||"---",h=e.match(/T:([^;]+);/)?.[1]||"---";N.textContent=t,T.textContent=d,W.textContent=h,d!=="---"?g.classList.remove("hidden"):g.classList.add("hidden")}else I.classList.add("hidden"),b.classList.add("hidden")}f.addEventListener("change",e=>{const t=e.target.files[0];if(!t)return;y.classList.add("hidden"),L.classList.remove("hidden"),v.classList.add("hidden"),r.textContent="Scanning",r.className="px-2 py-0.5 border border-yellow-600 text-yellow-500 text-[9px] uppercase";const d=new FileReader;d.onload=h=>{const n=new Image;n.onload=()=>{m.classList.remove("hidden"),m.classList.remove("animating");const s=Math.min(600/n.width,400/n.height,1);i.width=n.width*s,i.height=n.height*s,o.drawImage(n,0,0,i.width,i.height);const l=o.getImageData(0,0,i.width,i.height),a=jsQR(l.data,l.width,l.height);m.offsetWidth,m.classList.add("animating"),setTimeout(()=>{L.classList.add("hidden"),a?(R(a.data),y.classList.remove("hidden"),r.textContent="Success",r.className="px-2 py-0.5 border border-green-500 text-green-500 text-[9px] uppercase",o.strokeStyle="#00ff41",o.lineWidth=4,o.beginPath(),o.moveTo(a.location.topLeftCorner.x,a.location.topLeftCorner.y),o.lineTo(a.location.topRightCorner.x,a.location.topRightCorner.y),o.lineTo(a.location.bottomRightCorner.x,a.location.bottomRightCorner.y),o.lineTo(a.location.bottomLeftCorner.x,a.location.bottomLeftCorner.y),o.closePath(),o.stroke()):(r.textContent="Error",r.className="px-2 py-0.5 border border-red-900 text-red-500 text-[9px] uppercase",v.classList.remove("hidden"),C.innerHTML='<span class="text-red-500">FAILED_TO_DECODE_PATTERN</span>')},1500)},n.src=h.target.result},d.readAsDataURL(t)});c.addEventListener("dragover",e=>{e.preventDefault(),c.classList.add("drag-over")});c.addEventListener("dragleave",()=>{c.classList.remove("drag-over")});c.addEventListener("drop",e=>{e.preventDefault(),c.classList.remove("drag-over");const t=e.dataTransfer.files;t.length>0&&(f.files=t,f.dispatchEvent(new Event("change")))});document.getElementById("clear-btn").addEventListener("click",()=>{f.value="",m.classList.add("hidden"),y.classList.add("hidden"),L.classList.add("hidden"),v.classList.remove("hidden"),C.textContent="Awaiting input...",r.textContent="Waiting",r.className="px-2 py-0.5 border border-green-900 text-[9px] uppercase",g.classList.add("hidden"),o.clearRect(0,0,i.width,i.height)});document.getElementById("copy-btn").addEventListener("click",()=>{const e=x.textContent,t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t);const d=document.getElementById("copy-btn").textContent;document.getElementById("copy-btn").textContent="COPIED",setTimeout(()=>{document.getElementById("copy-btn").textContent=d},1e3)});g.addEventListener("click",()=>{const e=T.textContent;e&&e!=="---"&&navigator.clipboard.writeText(e).then(()=>{const t=g.innerHTML;g.innerHTML='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>',setTimeout(()=>{g.innerHTML=t},1e3)}).catch(t=>{console.error("Failed to copy:",t)})});D.addEventListener("click",async()=>{try{u=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}),p.srcObject=u,B.classList.remove("hidden"),E=!0,c.classList.add("hidden")}catch(e){console.error("Camera access denied:",e),alert("Camera access denied. Please allow camera permissions.")}});M.addEventListener("click",()=>{P()});O.addEventListener("click",()=>{E&&(p.pause(),i.width=p.videoWidth,i.height=p.videoHeight,o.drawImage(p,0,0),k(),P(),m.classList.remove("hidden"),m.classList.remove("animating"))});function P(){u&&(u.getTracks().forEach(e=>e.stop()),u=null),B.classList.add("hidden"),c.classList.remove("hidden"),E=!1}function k(){const e=o.getImageData(0,0,i.width,i.height),t=jsQR(e.data,e.width,e.height);L.classList.add("hidden"),t?(R(t.data),y.classList.remove("hidden"),r.textContent="Success",r.className="px-2 py-0.5 border border-green-500 text-green-500 text-[9px] uppercase",o.strokeStyle="#00ff41",o.lineWidth=4,o.beginPath(),o.moveTo(t.location.topLeftCorner.x,t.location.topLeftCorner.y),o.lineTo(t.location.topRightCorner.x,t.location.topRightCorner.y),o.lineTo(t.location.bottomRightCorner.x,t.location.bottomRightCorner.y),o.lineTo(t.location.bottomLeftCorner.x,t.location.bottomLeftCorner.y),o.closePath(),o.stroke()):(r.textContent="Error",r.className="px-2 py-0.5 border border-red-900 text-red-500 text-[9px] uppercase",v.classList.remove("hidden"),C.innerHTML='<span class="text-red-500">FAILED_TO_DECODE_PATTERN</span>')}
